{"version":3,"file":"static/iframe.9ae3e7953ade3acb028c.bundle.js","sources":["webpack:///./src/index.js"],"sourcesContent":["import React from 'react';\nimport escapeRegExp from 'lodash.escaperegexp';\nimport PropTypes from 'prop-types';\n\nexport default class Substring extends React.Component {\n    static propTypes = {\n        children: PropTypes.string,\n        substrings: PropTypes.arrayOf(\n            PropTypes.shape({\n                match: PropTypes.oneOfType([PropTypes.instanceOf(RegExp), PropTypes.string]).isRequired,\n                component: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n                caseSensitive: PropTypes.bool,\n                style: PropTypes.object,\n                className: PropTypes.string,\n            }),\n        ),\n    };\n    render() {\n        const { children: content, substrings } = this.props;\n\n        let contentParts = [content];\n\n        let key = 0;\n        substrings.forEach(({ match, component: Component, caseSensitive, props }) => {\n            props = props || {};\n\n            if (!Array.isArray(match)) {\n                match = [match];\n            }\n\n            match.forEach(matchItem => {\n                let midResult = [];\n                contentParts.forEach((contentPart, idx) => {\n                    //Обрабатываем только строки - остальные части это реакторвские объекты\n                    if (typeof contentPart === 'string') {\n                        if (typeof matchItem === 'string') {\n                            let modificators = 'g';\n                            if (caseSensitive !== true) {\n                                modificators += 'i';\n                            }\n                            matchItem = new RegExp(escapeRegExp(matchItem), modificators);\n                        }\n\n                        let matchResult;\n                        let startIndex = 0;\n                        let lastIndex = 0;\n                        while ((matchResult = matchItem.exec(contentPart))) {\n                            const from = matchResult.index;\n                            const to = matchItem.lastIndex;\n\n                            const beforeString = contentPart.slice(startIndex, from);\n                            if (beforeString) {\n                                midResult = [...midResult, beforeString];\n                            }\n                            const matchSubstring = contentPart.slice(from, to);\n                            startIndex = to;\n                            lastIndex = to;\n\n                            midResult = [\n                                ...midResult,\n                                <Component key={key++} {...props}>\n                                    {matchSubstring}\n                                </Component>,\n                            ];\n                        }\n                        const afterString = contentPart.slice(lastIndex);\n                        if (afterString) {\n                            midResult = [...midResult, afterString];\n                        }\n                    } else {\n                        midResult = [...midResult, contentPart];\n                    }\n                });\n                contentParts = midResult;\n            });\n        });\n\n        return <span>{contentParts}</span>;\n    }\n}\n"],"mappings":"AAIA","sourceRoot":""}