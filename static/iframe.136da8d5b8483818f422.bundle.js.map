{"version":3,"file":"static/iframe.136da8d5b8483818f422.bundle.js","sources":["webpack:///./src/index.js"],"sourcesContent":["import React from 'react';\nimport escapeRegExp from 'lodash.escaperegexp';\nimport PropTypes from 'prop-types';\n\nexport default class Substring extends React.PureComponent {\n    static propTypes = {\n        /**  Main content as string */\n        children: PropTypes.string,\n\n        /**  Array on Substring objects */\n        substrings: PropTypes.arrayOf(\n            PropTypes.shape({\n                /** Pattern to search substrings for processing */\n                match: PropTypes.oneOfType([PropTypes.instanceOf(RegExp), PropTypes.string]).isRequired,\n\n                /** React component or tag name taking matching content. (Default tag `mark`) */\n                component: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n\n                /** If use match as string - it allows to switch on case sensitive search substring (Default: `false`) */\n                caseSensitive: PropTypes.bool,\n\n                /** Additional props for matching component (can use `style`, `className` or something else) */\n                props: PropTypes.object,\n            }),\n        ).isRequired,\n    };\n\n    render() {\n        const { children: content, substrings } = this.props;\n\n        let contentParts = [content];\n\n        let key = 0;\n        substrings.forEach(({ match, component: Component, caseSensitive, props }) => {\n            props = props || {};\n            Component = Component || 'mark';\n\n            if (!Array.isArray(match)) {\n                match = [match];\n            }\n\n            match.forEach(matchItem => {\n                let midResult = [];\n                contentParts.forEach(contentPart => {\n                    //Work only with string - another ones are React elements\n                    if (typeof contentPart === 'string') {\n                        if (typeof matchItem === 'string') {\n                            let modificators = 'g';\n                            if (caseSensitive !== true) {\n                                modificators += 'i';\n                            }\n                            matchItem = new RegExp(escapeRegExp(matchItem), modificators);\n                        }\n\n                        let matchResult;\n                        let startIndex = 0;\n                        let lastIndex = 0;\n                        while ((matchResult = matchItem.exec(contentPart))) {\n                            const from = matchResult.index;\n                            const to = matchItem.lastIndex;\n\n                            const beforeString = contentPart.slice(startIndex, from);\n                            if (beforeString) {\n                                midResult.push(beforeString);\n                            }\n                            const matchSubstring = contentPart.slice(from, to);\n                            startIndex = to;\n                            lastIndex = to;\n\n                            midResult.push(\n                                <Component key={key++} {...props}>\n                                    {matchSubstring}\n                                </Component>,\n                            );\n                        }\n                        const afterString = contentPart.slice(lastIndex);\n                        if (afterString) {\n                            midResult.push(afterString);\n                        }\n                    } else {\n                        midResult.push(contentPart);\n                    }\n                });\n                contentParts = midResult;\n            });\n        });\n\n        return <span>{contentParts}</span>;\n    }\n}\n"],"mappings":"AAIA","sourceRoot":""}